# Changelog

All notable changes to this project will be documented in this file.

## [unreleased]

### üöÄ Features

- Adding rector to composer test script and fixing rector.php code style with pint
- Creating user model unit test and changing pest code coverage to 100%
- Add dates, DB and models configurations to AppServiceProvider for maintainability and consistency
- *(database)* Creating database migrations and the necessary models and factories
- Adjusting users table with the role column
- Adjusting commentFactory for testing
- Adjusting PlaylistVideoFactory
- Adjusting TagFactory
- Adjusting UserInfoFactory
- Adjusting VideoFactory
- Adjusting WatchHistoryFactory
- Setup video and category models relation
- Adjusting comment model relations
- Adjusting like model relations
- Adjusting playlist model relations
- Adjusting pivot playlistvideo model relations
- Adjusting tag model relations
- Adjusting userinfo model relations and creating nationality model
- Adjusting nationality model relations
- Adjusting video model relations
- Adding viewers relation method to video model
- Adjusting watchHistory model relation and change like model docs
- Adujusting the dockerfile configuration with env port and exposing it
- Create nationality factory
- Added uploads filesystem to the filesystems config
- Adjusting video segments filesystem
- Changing video process paths for better files organization
- Implementing video playback functionality
- Adjusting the routes for tests
- Implementing video encoding into the videoController, change the return type of fileUploadService and modify ffmpeg inprogress method return
- Creating ProcessVideo job to handel server blocks this make project scalable
- Creating and implementing categoryController
- Adding role to tokenthe payload function and preducing a test for it
- Creating authController and auth resource with strict types and final classes
- Implemeting register logic in the store method to match all crud code philosophy
- Adding login fonctionality to the AuthController with validation
- Making basic profile method and creating the api routes with JWT middleware
- Adding login method testing to AuthControllerTest
- Creating and implementing commentController
- Make likeController and implementing the logic
- Make PlayListController and implementing the logic with error handling
- Creating TagController and implementing the logic with error handling
- Creating WatchHistoryController and implementing the logic with error handling
- Implementing the update logic with error handling for playlist
- Implementing the UserInfoController logic with error handling
- Creating NationalityController and implementing the logic with error handling
- Adding api resource routes for the controllers
- Adding home page frontend
- Adding comments relation in the videoController
- Adding home page fornt end with the video card and navegation bare components and custimizing the app.blade layout   
- Implementing like logic
- Implementing new user signup with role selection and the coresponding necessary controller refactoring and web view routes
- Implementing user login functionality with the login api route
- Create the HomeController
- Implementing home controller logic and restyle video upload modal
- Implementing app global layout in the video watch page and adding the like counter to insted of the dislike button   
- Implementing videos browsing in the video details page with pagination
- Video suggestins area in the video watch page and with infinite scrol and loading components
- Making comment section for the video watch page
- Creating category form
- Retriving the categories in descending order
- Adding avatare to the new user regestration
- Change avatar image max size to 12048 kb
- Add fetcher for the user data for navigation bar
- Add the category filter for easy navigation
- Fixing recommanded chanels side bar

### üêõ Bug Fixes

- No_unused_imports in pint code linting
- *(docker)* Configure Xdebug and dependencies and resolve Xdebug double-loading issue
- *(docker)* Implementing new composer script and ignoring typos
- Puting tables in the write order and creating nationalities table
- Change back thumbnail from binary to longText
- Remove unnecessary rememberTocken from hidden column in the User Model
- Fixing test yml hashfiles bug
- Code style test is failing due to unmuching code styles
- Peck test is failing becouse of playlist, ignoring it in peck.json
- Rector test fail Add Closure Void Return Type Where No Return to fix it
- Adding vendor and node_modules to dockerignore file and adjusting dockerfile after changing the app port forwarding in docker-compose
- Category test fails due to the system's temporary directory generated by the faker filepath method in video factory  
- CommentTest is now more optimized for this new changes
- LikeTest coverage and fix model relations
- Adding folder slug property to the VideoController and adding some style and layout to videoDetails page
- Fixing the azure deployment configuration in the github/workflow
- Debuging azure deploy
- Granting permissions to azure-container
- Fixing models return types in php methods anotations
- Phpdoc_unseparated, unused_imports, unordered_imports
- Fixing CommentController returns and data validation
- Fix controllers namespaces
- Removing unessacery controller class uses
- Handling thumbnail upload and fixing front end file extensions filter in the upload form
- Fixing like verifier and like form submetion logic
- Fixing upload modal and form submition and user token
- Fixing comment refetching on new comment submition
- Fixing userDashboard statistics
- Fixing the Dashboard form on the nav bar
- Removing error log from AuthController
- Fix the category crud

### üíº Other

- Create comments table schema
- Create categories table schema
- Create tags table schema
- Adjust user_infos table schema
- Adjust videos table schema
- Adjust playlists table schema
- Adjust playlist_videos table schema
- Adjust watch_histories table schema
- Adjust likes table schema
- Update the migration, implemeting tagTest, fixing tagFactory and redo tag_video models relations
- Video streaming is now working with segmenetation and all syported qualities
- Unactive remove azure cd workflow
- Implementing video upload
- Implemting like functionality and fixing jwt config and adding like relation to the video model for like count       
- Adding csrf token to the category form
- Adding user dashboard and userinfo modal components and implementing user dashboard and refactoring userinfo and watchhistory controllers

### üöú Refactor

- Changing all the code style to match pint rules to increase maintainability and consistency
- *(docker)* Change database name in docker compose
- Remove rememberTocken column from user table and UserFactory
- Refactoring commentFactory and adjusting LikeFactory with models factories
- Refactoring CommentFactory and adjusting PlaylistFactory
- Refactor comment factory subcomment id to be null
- Remove dead code and unactive namespaces
- Refactor the code to match coding style of the workflow for better integration
- Adding video slug to the database migrations and handling the new column in the test
- Add slug column to video factory and commenting videoControllerTest code
- Add methods anotations to videoController methods and processVideo command handler
- Remove media column from videos table and refactoring the tests, factories and adjusting video model fillable        
- Changing the processVideo call from artisan command to a Queued job
- Restyle last code changes with pint
- Geting the user id from JWT statless token for security and the user's conviniance
- Prevoiding more data for the videoDetails page
- Sending more data from the video controller
- Changing the created videos from monolithic layout to components based layout
- Change cancle button to anchor element

### üìö Documentation

- Adding git cliff for auto changelog generating
- Update git-cliff ChangeLog
- Regenerating the changelog after testing and refactoring
- Adjusting tag model docs
- Update AuthController docs

### üé® Styling

- Restyle video player layout
- Creating the nav bar and the logo and restyling details page
- Adding categories svg assets and fixing thumbnail aspect ratio to match 16:9
- Fixing categories icons posisions in the home page
- Creating category-card component for better organized and readable code
- Restyling video suggestions layout
- Adding some styling to the comment section
- Change category card styleing
- Change category card and the form styleing and layouts

### üß™ Testing

- Add scripts for unit tests, type checking, and linting
- Create category model and refactoring usertest and adding code coverage report to .gitignore and introducing new composer CMD
- Implementing like model test
- Creating test for nationality model and refactoring it
- Creating test for playlist model and refactoring it
- Refactor userinfo factory and model and creating the test accordingly
- Implementing video model test
- Implementing watchHistory test and refactor the model relations
- Producing videoController test
- Test azure deployment
- Creating authController test asserting 201 responses and modify the UserFactory for role faker
- Creating test for show profile method
- Fix the failing tests for merging

### ‚öôÔ∏è Miscellaneous Tasks

- Initialize Laravel project
- Simplifying composer scripts
- Initializing rector to test and refactor code to match coding standard with set of formatting rules
- Adgusted composer test suit configration waiting for pest code coverage (fix)!!
- Applying rector rules
- Adjusting ci test workflow
- Setup database config, image and env
- Configure aspell in ci workflow
- Add on pull_request event triger for test workflow
- Setup docker configuration with all the required dependencies and images and nginx server config with custom php.ini 
- Add coverage to gitignore
- Ignore typos in peck.json for the ci
- Installing laravel-ffmpeg for dynamic video Bitrates and segmentation
- Configuring azure deployment in the workflow
- Remove the frontend diractory
- Drop support for processVideo command
- Installing JWT for statless bearer token
- Drop support for tailwindcss v4.1 and configuring v3.4 and installing axios for laravel's default JavaScript scaffolding(bootstrap.js)

<!-- generated by git-cliff -->
